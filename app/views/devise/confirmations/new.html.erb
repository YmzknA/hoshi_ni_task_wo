<!-- flashメッセージ -->
<div id="flash" class="fixed m-5 top-0 left-0 right-0 z-50">
  <%= render "flash" %>
</div>

<div class="flex items-center justify-center min-h-screen px-6">
  <div class="card bg-base-300 w-2xl h-2xl p-10 flex justify-center z-10">
    <div>
      <!-- ロゴ -->
      <div class="flex justify-center mx-auto">
        <%= link_to root_path do %>
          <%= image_tag 'icon-512x512.png', width: "90" %>
        <% end %>
      </div>

      <!-- タイトルタブ -->
      <div class="flex items-center justify-center mt-6 text-secondary">
        <div role="tablist" class="tabs tabs-border">
          <a role="tab" class="tab tab-active">認証メール再送信</a>
        </div>
      </div>

      <!-- 認証メール再送信フォーム -->
      <%= form_with model: resource, as: resource_name, url: confirmation_path(resource_name), 
                    method: :post, data: {turbo: false, action: "submit->loading#show" }, 
                    html: { class: "w-full mt-6" } do |f| %>

        <%= render "devise/shared/error_messages", resource: resource %>

        <label class="floating-label mt-5">
          <%= f.email_field :email,
                autofocus: true,
                autocomplete: "email",
                value: (resource.pending_reconfirmation? ? resource.unconfirmed_email : resource.email),
                placeholder: "メールアドレス",
                class: "input input-lg input-primary w-full text-base-100 bg-base-200" %>
          <span class="floating-label-text">メールアドレス</span>
        </label>

        <%= f.submit "認証メールを再送信", class: "btn btn-secondary text-base-100 w-full mt-8" %>
      <% end %>

      <!-- 説明文 -->
      <div class="my-8 text-center space-y-3">
        <p class="text-sm text-base-content/70">
          認証メールが届いていない場合は、上記フォームから再送信できます
        </p>
        <div class="text-xs text-base-content/60 space-y-1">
          <p>・迷惑メールフォルダをご確認ください</p>
          <p>・メールアドレスに間違いがないかご確認ください</p>
          <p>・認証メールの有効期限は24時間です</p>
        </div>
      </div>

      <div class="divider mb-8">または</div>

      <!-- ナビゲーションリンク -->
      <div class="text-center space-y-2">
        <%= link_to "ログインページに戻る", new_session_path(resource_name), class: "text-sm hover:underline block" %>
        <%= link_to "アカウント作成はこちら", new_registration_path(resource_name), class: "text-sm hover:underline block" %>
      </div>
    </div>
  </div>
</div>